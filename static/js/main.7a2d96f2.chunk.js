(this.webpackJsonpstandards_of_care=this.webpackJsonpstandards_of_care||[]).push([[0],{135:function(e,t,n){},142:function(e,t){},144:function(e,t){},157:function(e,t){},159:function(e,t){},187:function(e,t){},189:function(e,t){},190:function(e,t){},195:function(e,t){},197:function(e,t){},216:function(e,t){},228:function(e,t){},231:function(e,t){},255:function(e,t,n){},256:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),i=n(127),r=n.n(i),s=(n(135),n(5)),o=n.n(s),l=n(26),u=n(9),d=n(4),f=n(21),j=n(6),p="248077230623-ub7rufa49kccmjj9p13lhg4t5kk8oc28.apps.googleusercontent.com",b="1wau2O_imSs3Mc58qEyRFf5l83Oi-LZqY",h="0ADMiFg5bnF-ZUk9PVA",m=n(128),O=n.n(m);function v(e){try{return e.split("T")[0]}catch(t){return e}}function g(e){try{return e.replace(".pdf","")}catch(t){return e}}function x(e){return e.split(",").sort()}var w=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,c,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={alg:"RS256",typ:"JWT"},n={iss:"frontend@standards-of-care-313101.iam.gserviceaccount.com",scope:"https://www.googleapis.com/auth/drive",aud:"https://oauth2.googleapis.com/token",exp:Math.floor(Date.now()/1e3)+3600,iat:Math.floor(Date.now()/1e3)},c=O.a.sign({header:t,payload:n,secret:"-----BEGIN PRIVATE KEY-----\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDL6PKdkS/sFc+1\necUSpIFVBidzPmXbyDt1RDYoGHnOefCE7d3hiE5P45JwAtvxTiRKW1MZAMahHkTe\nS525RSaSyGitezj5Pw7Qoq3wStMfEQZai4YozAB/ZB4oXD4xtcBIAtCpMPOPSGSq\njdZ6SoAsmyYQx6Lt96U0f3maW2wJMcc/AlVMCRf3KN9dc+o+oEKUr2mrt2NZa8NL\nQCh8QZ+YEo6NNXirWEgLE43569+cJf0FFskxLiz7SyXXPDGwTInH8CttKJQAHeQ+\n/Arf8H9Qg+naZs+mXW1iZjaBfca3F5UWBOFST5czsZLID7jMeWCkLXVI5F80UIlH\n72KH0VKrAgMBAAECggEAMrnrLS6SpOESMHuv/oDFGdEznDRAI6pOvE/xRw07tBVa\ns7727SW7EZ2z7sCPVZrSZVsNs5EhWLCOglx+Sro8q9RGUi3u0PaSaW2m5rm+hqJ2\nGa1O/TQuxYIzDGhSIoyr3l4w6X4fgRwJyvIJEpgZBb+8+vym+Bsc0pAJwNAQcsKp\nJxHFGtMKno078pi0ujiKIEsO0E0i+P8yiTQD4Equr/Azlmbzea2Mrzy5aflYHmOh\nZ0MmODvXttMoIlr6gtVQcJAhBM+WIHLSgkj60x+RdAUbhC8UK24uFq0T9u3ojKze\n7v55gCXJrHLJEkJ85WEtmShqKQ3VQB/ju4DLapeVHQKBgQDslvTHx5TpY3SeDPBu\nojEKr8TxzXk3K4ceSKZJbb8rqGUTXbFXk40/u9o1yJXZCjd63ZncgKx22HIwpHcI\npqkBRIVOEhZF4hn3krDXVOX2EPYi5eX83A0SQcDoyBwoQFNfqErBgBP+iEOHbg7h\n5w+izlq7hHf1UunTlL2TrEKv7QKBgQDco6BLZOfqX4s7uCc6Rowe3Bijg7R96Cg/\n6daFBgmP9nJw0hBuDhS3inw/vcmno5e50/Ghjnim8xNi2qXeNkZgP0LctoDjdbhx\n53Gldepkgv5ca1XpZrevBL2JpLgjX5tlqO72TYWEXPF8mkVwjzkIqJfIWuW1OlgF\nzF9efKtJ9wKBgDicvqH3bfiS5drT+cxfXyDRgmzh3/mFnuVuOOwlKLOHrff+WWs9\nUXVIvCRWhRTUTwZFdIXA/IPLszdUg288ggBdpxBRX6cFPXVyUoKUPBqvYFZlcK0a\n8r3FoiWRjLtM+SZQnOLEhQRJEu+bNFB1+9XXTvrD7fh0CKOqWdq2Q5bZAoGBANii\nA7HjCl4xn0hsgH+UYuGt4rcxipcQyewvEUSc7+ic5jJl3mHgi3DGlUYUdxmU41U+\nhwHEHCx3f/JQkglDKwg3NNP2kUhD/mw//XKi+xfjEhH2BW1cQD+knOC3jWCV78L6\nAl5tMQoMI8Leyg1BYpNgzV6X+PBer6xJxN3F9HxzAoGAbZ6vc0viV7V9ni2LiI5+\nlJ2LwC7pI0fl8CGf9Sb3wNhbLZT5k6/HvN5celF9X5e20K0D9i6DS1LxBDxb9oGH\n2ZG6xf4v90i57u3lykm+TLCX1Ca8KndA6stAH4/swrltXT1IMt3qvSAqdhgVz2tI\nW7+dwxQpjHougz5hg8wmHOw=\n-----END PRIVATE KEY-----\n"}),e.next=5,fetch("https://oauth2.googleapis.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"grant_type=urn%3Aietf%3Aparams%3Aoauth%3Agrant-type%3Ajwt-bearer&assertion="+c});case 5:return a=e.sent,e.next=8,a.json();case 8:return i=e.sent,e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=n(12),N=n(0);function k(e){var t=e.tags.map((function(e){return Object(N.jsx)("div",{className:"tag",children:e},e)}));return Object(N.jsxs)(f.b,{to:"./"+e.fileID,className:"file-result",children:[Object(N.jsx)("img",{src:e.thumbnailLink,className:"file-thumbnail"}),Object(N.jsxs)("div",{className:"file-info",children:[Object(N.jsxs)("div",{className:"file-name-date",children:[Object(N.jsx)("span",{className:"file-name",children:e.fileName}),Object(N.jsx)("span",{className:"file-date",children:e.modifiedTime})]}),Object(N.jsx)("span",{className:"file-tags",children:t})]})]})}function F(e){return Object(N.jsxs)(f.b,{to:"/upload",className:"file-result new-file",children:[Object(N.jsx)("span",{children:"Upload New File"}),Object(N.jsx)(A.c,{})]})}var S=n(74),D=n.p+"static/media/slu-logomark.6bfb103a.png",y=n(130),E=n.n(y);function T(e){var t;return e.isAuth&&(t=Object(N.jsx)("span",{title:"remove tag",children:Object(N.jsx)(A.h,{className:"remove-tag-button",onClick:function(){return e.removeTag(e.tagName)}})})),Object(N.jsxs)("div",{className:"tag",children:[e.tagName,t]})}function C(e){var t,n=Object(c.useState)(!1),a=Object(d.a)(n,2),i=a[0],r=a[1],s=Object(c.useState)(""),o=Object(d.a)(s,2),l=o[0],u=o[1],f=Object(c.useState)([]),j=Object(d.a)(f,2),p=j[0],b=j[1],h=function(t,n){t.preventDefault(),e.addTag(n),u(""),b([])};if(Object(c.useEffect)((function(){i||(u(""),b([]))}),[i]),i){var m={onChange:function(e){e.preventDefault(),u(e.target.value)},value:l,autoFocus:!0,onBlur:function(){return r(!1)}},O="";p.length>0&&(O=" input-has-suggestions"),t=Object(N.jsx)("div",{className:"tag tag-input"+O,children:Object(N.jsx)("form",{onSubmit:function(e){return h(e,l)},children:Object(N.jsx)(E.a,{suggestions:p,onSuggestionsFetchRequested:function(t){var n=t.value;b(function(t){var n=t.trim().toLowerCase(),c=n.length;return 0===c?[]:e.globalTags.filter((function(e){return e.toLowerCase().slice(0,c)===n}))}(n))},onSuggestionsClearRequested:function(){b([])},onSuggestionSelected:function(e,t){var n=t.suggestion;h(e,n)},getSuggestionValue:function(e){return e},renderSuggestion:function(e){return Object(N.jsx)("span",{children:e})},inputProps:m})})})}else t=Object(N.jsx)(A.c,{className:"tag add-tag-button",onClick:function(){return r(!0)}});return Object(N.jsx)("span",{title:"add tag",children:t})}function L(e){var t=Object(j.g)(),n=function(e){console.log("Oauth Error:"),console.log(e)},c=e.isAuth?Object(N.jsx)(B,{handleLogOut:function(t){e.handleLogOut()},handleFailure:n}):Object(N.jsx)(I,{handleLogIn:function(t){var n=t.accessToken,c=t.profileObj.email;e.handleLogIn(n,c)},handleFailure:n});return Object(N.jsx)("div",{className:"header-wrapper",children:Object(N.jsxs)("div",{className:"header",children:[Object(N.jsxs)("div",{className:"header-home-wrapper",children:[Object(N.jsxs)(f.b,{to:"/",className:"home-link",onClick:function(e){console.log(t),"/"===t.pathname&&window.location.reload()},children:[Object(N.jsx)("img",{src:D,className:"header-logo"}),Object(N.jsx)("p",{children:"Standards of Care"})]}),Object(N.jsx)("i",{className:"header-text",children:"\xa0Maternal-Fetal Medicine"})]}),c]})})}function I(e){return Object(N.jsx)(S.GoogleLogin,{style:{"background-color":"#264e98"},clientId:p,onSuccess:e.handleLogIn,onFailure:e.handleFailure,render:function(e){return Object(N.jsx)("button",{className:"oauth-button",onClick:e.onClick,disabled:e.disabled,children:"Admin Login"})},icon:!1,cookiePolicy:"single_host_origin",scope:"profile email https://www.googleapis.com/auth/drive"})}function B(e){return Object(N.jsx)(S.GoogleLogout,{clientId:p,onLogoutSuccess:e.handleLogOut,onFailure:e.handleFailure,render:function(e){return Object(N.jsx)("button",{className:"oauth-button log-out",onClick:e.onClick,disabled:e.disabled,children:"Log Out"})},icon:!1,cookiePolicy:"single_host_origin"})}function H(e){var t=Object(c.useState)(""),n=Object(d.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(!1),s=Object(d.a)(r,2),o=s[0],l=s[1],u=function(t){t.preventDefault(),e.updateFunction(a)},f=o?"":"not-selected";return Object(N.jsx)("div",{className:"subheader",children:Object(N.jsxs)("form",{id:"search-bar",onSubmit:u,children:[Object(N.jsxs)("select",{title:"Select Search Filter (Default: ALL)",id:"filter-select",className:f,defaultValue:0,onChange:function(t){t.preventDefault();t.target.value;l(!0),e.updateFilter(parseInt(t.target.value))},children:[Object(N.jsx)("option",{hidden:!0,disabled:!0,value:0,children:"\u25be"}),Object(N.jsx)("option",{disabled:!0,value:"",children:"Search Filter:"}),Object(N.jsx)("option",{value:0,children:"All"}),Object(N.jsx)("option",{value:1,children:"Title"}),Object(N.jsx)("option",{value:2,children:"Tags"})]}),Object(N.jsx)("input",{type:"search",placeholder:"Search Files...",onChange:function(e){e.preventDefault(),i(e.target.value)}}),Object(N.jsx)("button",{type:"button",onClick:u,children:Object(N.jsx)(A.e,{className:"button-icon"})})]})})}function P(e){var t=e.tags.map((function(e){return Object(N.jsx)(T,{tagName:e},e)})),n=e.isAuth?Object(N.jsxs)(f.b,{to:"/".concat(e.fileID,"/edit"),className:"edit-link",children:["Edit File",Object(N.jsx)(A.a,{})]}):null,c=Object(N.jsx)(A.f,{title:"Click to copy link to clipboard",id:"copy-button",onClick:function(){navigator.clipboard.writeText(window.location.href),window.alert("Link to this file has been copied to the clipboard!\n\n"+window.location.href)}});return Object(N.jsx)("div",{className:"subheader",children:Object(N.jsxs)("div",{className:"subheader-wrapper",children:[Object(N.jsxs)("div",{className:"file-name",children:[Object(N.jsxs)("span",{children:[g(e.name)," ",c]}),Object(N.jsxs)("div",{children:[Object(N.jsxs)("a",{href:e.printURL,target:"_blank",rel:"noopener noreferrer",className:"print-link",children:[Object(N.jsx)(A.d,{className:"button-icon"}),"Print"]}),n]})]}),Object(N.jsxs)("div",{className:"file-date",children:["Last Modified: ",e.modifiedTime]}),Object(N.jsx)("div",{id:"tags-list",children:t})]})})}var z=function(e){var t=e.isAuth?Object(N.jsx)(F,{}):null,n=e.files.length>0||e.isBeforeLoad?null:Object(N.jsx)("div",{children:"No results."});return Object(N.jsxs)("div",{className:"drive-file-list",children:[t,e.files,n,Object(N.jsx)("div",{children:"\xa0"})]})};function X(e,t,n){for(var c=[],a=function(){var a=g(e.files[i].name),u=e.files[i].id,d=e.files[i].thumbnailLink,f=v(e.files[i].modifiedTime),j=function(e){return"https://drive.google.com/file/d/"+e}(u);r=[],"properties"in e.files[i]&&"tags"in e.files[i].properties&&(r=x(e.files[i].properties.tags)),s=!0,a.toLowerCase().includes(t.toLowerCase())||(s=!1),o=!1;var p,b=Object(l.a)(r);try{for(b.s();!(p=b.n()).done;){p.value.toLowerCase().includes(t.toLowerCase())&&(o=!0)}}catch(m){b.e(m)}finally{b.f()}var h=function(){c[i]=Object(N.jsx)(k,{fileName:a,fileURL:j,fileID:u,thumbnailLink:d,modifiedTime:f,tags:r},u)};switch(n){case 0:(o||s)&&h();break;case 1:s&&h();break;case 2:o&&h()}},i=0;i<e.files.length;i++){var r,s,o;a()}return c}var K=function(e){var t=Object(c.useState)(!0),n=Object(d.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)([]),s=Object(d.a)(r,2),l=s[0],f=s[1],j=Object(c.useState)(""),p=Object(d.a)(j,2),b=p[0],m=p[1],O=Object(c.useState)(0),v=Object(d.a)(O,2),g=v[0],x=v[1],A=Object(c.useState)(""),k=Object(d.a)(A,2),F=k[0],S=k[1],D="driveId=".concat(h),y=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f([]),t="".concat("https://www.googleapis.com/drive/v3/files?").concat("q='1wau2O_imSs3Mc58qEyRFf5l83Oi-LZqY' in parents","&").concat("fields=files(id, name, thumbnailLink, modifiedTime, properties)","&").concat(D,"&").concat("includeItemsFromAllDrives=true&corpora=drive&supportsAllDrives=true","&orderBy=name"),e.next=4,fetch(t,{method:"GET",headers:{Authorization:"Bearer "+F}});case 4:return n=e.sent,e.next=7,n.json();case 7:c=e.sent,f(X(c,b,g)),i(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!=F&&(y(),console.log(F));case 1:case"end":return e.stop()}}),e)})))()}),[b,F]),Object(c.useEffect)((function(){""!=F&&(y(),console.log("updated filter: ".concat(g)))}),[g]),Object(c.useEffect)((function(){Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t=e.sent,S(t.access_token);case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(N.jsxs)("div",{className:"main-view",children:[Object(N.jsx)(H,{updateFunction:m,updateFilter:function(e){x(e)}}),Object(N.jsx)(z,{isBeforeLoad:a,files:l,isAuth:e.isAuth})]})};var J=function(e){var t=Object(c.useState)({}),n=Object(d.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(""),s=Object(d.a)(r,2),l=s[0],f=s[1],p=Object(j.h)().fileID,b="https://drive.google.com/file/d/"+p+"/preview",m="https://drive.google.com/uc?id="+p+"&export=print";console.log("token passed down: ".concat(e.authToken)),console.log("current token: ".concat(l));var O=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"includeItemsFromAllDrives=true&corpora=drive&supportsAllDrives=true",t="driveId=".concat(h),n="".concat("https://www.googleapis.com/drive/v3/files/").concat(p).concat("?fields=name,modifiedTime,properties,id","&").concat(t,"&").concat("includeItemsFromAllDrives=true&corpora=drive&supportsAllDrives=true"),console.log(l),e.next=6,fetch(n,{method:"GET",headers:{Authorization:"Bearer "+l}});case 6:return c=e.sent,e.next=9,c.json();case 9:a=e.sent,console.log(a),i(a);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isAuth){t.next=4;break}f(e.authToken),t.next=8;break;case 4:return t.next=6,w();case 6:n=t.sent,f(n.access_token);case 8:case"end":return t.stop()}}),t)})))()}),[]),Object(c.useEffect)((function(){""!==l&&O()}),[l]);var A="...",k="...";a.name&&a.modifiedTime&&(A=g(a.name),k=v(a.modifiedTime));var F=[];return"properties"in a&&"tags"in a.properties&&(F=x(a.properties.tags)),Object(N.jsxs)("div",{className:"main-view",children:[Object(N.jsx)(P,{name:A,modifiedTime:k,fileID:a.id,printURL:m,tags:F,isAuth:e.isAuth}),Object(N.jsx)("iframe",{className:"pdf-frame",src:b})]})},U=n(75),M=n(18);function Q(e){var t=e.isNewFile?{true:"Upload File",false:"Must Select File and Enter Name"}:{true:"Submit Changes",false:"No Changes to Submit"},n=e.isNewFile?"UPLOAD FILE":"SUBMIT CHANGES";return Object(N.jsx)("span",{title:t[e.canSubmit],className:"submit-button"+{true:" active",false:" inactive"}[e.canSubmit],onClick:function(){e.canSubmit&&e.submitChanges()},children:n})}function Z(e){return Object(N.jsxs)("span",{title:"Delete File",className:"delete-button",onClick:function(t){window.confirm("Are you sure you want to delete ".concat(e.fileName,"?"))&&e.deleteFile()},children:[Object(N.jsx)(A.g,{}),"DELETE FILE"]})}function q(e){var t=Object(c.useState)(!1),n=Object(d.a)(t,2),a=n[0],i=n[1],r=a?Object(N.jsx)("button",{type:"button",onClick:function(t){t.preventDefault(),document.getElementById("file-picker").value="",e.resetFile(),i(!1)},children:"Remove File"}):null;return Object(N.jsxs)("form",{onChange:function(t){e.addFile(t),i(!0)},className:"file-upload-picker",children:[Object(N.jsx)("input",{id:"file-picker",type:"file",accept:".pdf"}),r]})}function G(e){var t,n,a=Object(c.useState)(""),i=Object(d.a)(a,2),r=i[0],s=i[1],o=Object(c.useState)(!1),l=Object(d.a)(o,2),u=l[0],f=l[1];""===e.name?(t="Enter File Name",n=" empty"):(t=e.name,n="");var j,p=function(e){e.preventDefault(),s(e.target.value)};return j=u?Object(N.jsx)("form",{className:"editing",onBlur:function(){return f(!1)},onSubmit:function(t){if(t.preventDefault(),""!==r){var n=r.replace(".pdf","")+".pdf";e.editName(n)}f(!1),s(""),console.log(r)},children:Object(N.jsx)("input",{autoFocus:!0,defaultValue:e.name,onFocus:p,onChange:p})}):Object(N.jsxs)("div",{className:"waiting".concat(n),onClick:function(){return f(!0)},children:[t,Object(N.jsx)(A.b,{})]}),Object(N.jsx)("span",{title:"Edit File Name",className:"edit-name",children:j})}var R="https://www.googleapis.com/drive/v3/files/";var V=function(e){var t=Object(c.useState)({name:""}),n=Object(d.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)({}),s=Object(d.a)(r,2),f=s[0],p=s[1],m=Object(c.useState)([]),O=Object(d.a)(m,2),v=O[0],A=O[1],k=Object(c.useState)([]),F=Object(d.a)(k,2),S=F[0],D=F[1],y=Object(c.useState)(null),E=Object(d.a)(y,2),L=E[0],I=E[1],B=Object(c.useState)(""),H=Object(d.a)(B,2),P=H[0],z=H[1],X=Object(c.useState)(!1),K=Object(d.a)(X,2),J=K[0],V=K[1],W=Object(j.h)().fileID,Y=Object(j.f)(),_=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"includeItemsFromAllDrives=true&corpora=drive&supportsAllDrives=true",t="driveId=".concat(h),n="".concat(R).concat(W).concat("?fields=*","&").concat(t,"&").concat("includeItemsFromAllDrives=true&corpora=drive&supportsAllDrives=true"),e.next=5,fetch(n,{method:"GET",headers:{Authorization:"Bearer "+P}});case 5:return c=e.sent,e.next=8,c.json();case 8:a=e.sent,console.log(a),i(a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,c,a,i,r,s,u,d,f,j,p,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"includeItemsFromAllDrives=true&corpora=drive&supportsAllDrives=true",t="driveId=".concat(h),n="?q='".concat(b,"' in parents&fields=files(properties)"),c="".concat(R).concat(n,"&").concat(t,"&").concat("includeItemsFromAllDrives=true&corpora=drive&supportsAllDrives=true"),e.next=6,fetch(c,{method:"GET",headers:{Authorization:"Bearer "+P}});case 6:return a=e.sent,e.next=9,a.json();case 9:i=e.sent,r=[],s=Object(l.a)(i.files);try{for(s.s();!(u=s.n()).done;){d=u.value,f=x(d.properties.tags),j=Object(l.a)(f);try{for(j.s();!(p=j.n()).done;)m=p.value,r.includes(m)||r.push(m)}catch(o){j.e(o)}finally{j.f()}}}catch(o){s.e(o)}finally{s.f()}A(r.sort());case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"supportsAllDrives=true",t="driveId=".concat(h),n="".concat(R).concat(W,"?").concat("supportsAllDrives=true","&").concat(t),e.next=5,fetch(n,{method:"DELETE",headers:{Authorization:"Bearer "+P}});case 5:e.sent,Y.push("/");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isAuth){t.next=5;break}z(e.authToken),console.log("access token passed down: ".concat(e.authToken)),t.next=9;break;case 5:return t.next=7,w();case 7:n=t.sent,z(n.access_token);case 9:case"end":return t.stop()}}),t)})))()}),[]),Object(c.useEffect)((function(){""!=P&&(e.isNewFile||_(),$())}),[P]),Object(c.useEffect)((function(){"properties"in a&&"tags"in a.properties&&D(x(a.properties.tags)),p(Object(M.a)({},a))}),[a]),Object(c.useEffect)((function(){if(""!=a.name){var e=S.join(",");e=""!==e?e:null,p(Object(M.a)(Object(M.a)({},f),{},{properties:{tags:e}}))}}),[S]),Object(c.useEffect)((function(){V(ce())}),[f,L]);var te=function(e){var t=Object(U.a)(S),n=t.indexOf(e);n>-1&&t.splice(n,1),D(t.sort())},ne=function(){for(var e={},t=0,n=Object.keys(f);t<n.length;t++){var c=n[t];("object"===typeof f[c]&&"object"===typeof a[c]?JSON.stringify(f[c])!==JSON.stringify(a[c]):!(f[c]===a[c]))&&(e[c]=f[c])}return e},ce=function(){var t=Object.keys(ne()).length>0,n=null!==L,c=""!==f.name;return e.isNewFile?n&&c:t||n},ae=function(){var t=Object(u.a)(o.a.mark((function t(){var n,c,a,i,r,s,l,u,d,f,j,p,m,O;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="https://www.googleapis.com/upload/drive/v3/files/",c="includeItemsFromAllDrives=true&corpora=drive&supportsAllDrives=true",a="driveId=".concat(h),i=ne(),console.log(JSON.stringify(i)),e.isNewFile){t.next=21;break}if(null===L){t.next=12;break}return r="".concat(n).concat(W,"?").concat(c,"&").concat(a),t.next=10,fetch(r,{method:"PATCH",headers:{Authorization:"Bearer "+P,"Content-Type":"application/pdf","Content-Length":L.size},body:L});case 10:s=t.sent,console.log(s);case 12:if(!(Object.keys(ne()).length>0)){t.next=18;break}return l="".concat(R).concat(W,"?").concat(c,"&").concat(a),t.next=16,fetch(l,{method:"PATCH",headers:{Authorization:"Bearer "+P,"Content-Type":"application/json"},body:JSON.stringify(i)});case 16:u=t.sent,console.log(u);case 18:Y.push("/".concat(W)),t.next=35;break;case 21:return d="".concat(R,"?").concat(c,"&").concat(a),f=Object(M.a)(Object(M.a)({},i),{},{parents:[b]}),t.next=25,fetch(d,{method:"POST",headers:{Authorization:"Bearer "+P,"Content-Type":"application/json"},body:JSON.stringify(f)});case 25:return j=t.sent,t.next=28,j.json();case 28:return p=t.sent,m=p.id,O="".concat(n).concat(m,"?uploadType=multipart&").concat(c,"&").concat(a),t.next=33,fetch(O,{method:"PATCH",headers:{Authorization:"Bearer "+P,"Content-Type":"application/pdf","Content-Length":L.size},body:L});case 33:t.sent,Y.push("/".concat(m));case 35:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(!e.isAuth)return Object(N.jsx)("div",{className:"main-view edit-main-view",children:Object(N.jsxs)("div",{className:"edit-file",children:[Object(N.jsx)("p",{children:"Access Denied: insufficient permissions."}),Object(N.jsx)("p",{children:"Sign in as administrator to edit or upload files."})]})});var ie=S.map((function(t){return Object(N.jsx)(T,{tagName:t,isAuth:e.isAuth,removeTag:te},t)})),re=Object(N.jsx)(C,{addTag:function(e){var t=Object(U.a)(S);t.includes(e)||(t.push(e),D(t.sort()))},globalTags:v}),se=e.isNewFile?null:Object(N.jsxs)("div",{id:"tags-list",title:"Changes to tags may take a few minutes to appear in search",children:[Object(N.jsx)("span",{className:"tags-label",children:"Tags:"}),ie,re]}),oe=e.isNewFile?null:Object(N.jsx)(Z,{fileName:a.name,deleteFile:ee}),le=e.isNewFile?"Upload New File":"Edit File",ue=e.isNewFile?"":"Current File Name: ".concat(g(a.name));return Object(N.jsx)("div",{className:"main-view edit-main-view",children:Object(N.jsxs)("div",{className:"edit-file",children:[Object(N.jsx)("h1",{title:ue,children:le}),Object(N.jsx)("hr",{}),Object(N.jsx)("span",{children:"File Name:"}),Object(N.jsx)(G,{name:g(f.name),editName:function(e){p(Object(M.a)(Object(M.a)({},f),{},{name:e})),console.log("edited name ".concat(e))}}),se,Object(N.jsxs)("div",{id:"file-upload",children:[Object(N.jsx)("span",{children:"Upload New File:"}),Object(N.jsx)(q,{addFile:function(t){var n=Array.from(t.target.files)[0];console.log(n),e.isNewFile&&""===f.name&&p(Object(M.a)(Object(M.a)({},f),{},{name:n.name})),I(n)},resetFile:function(){L.name===f.name&&p(Object(M.a)(Object(M.a)({},f),{},{name:""})),I(null)}})]}),Object(N.jsxs)("div",{id:"submit-delete-buttons",children:[Object(N.jsx)(Q,{isNewFile:e.isNewFile,canSubmit:J,submitChanges:ae}),oe]})]})})};n(255);var W=function(e){var t=Object(c.useState)([]),n=Object(d.a)(t,2),a=n[0],i=n[1],r=Object(c.useState)(""),s=Object(d.a)(r,2),p=s[0],b=s[1],m=Object(c.useState)(!1),O=Object(d.a)(m,2),v=O[0],g=O[1];return Object(c.useEffect)((function(){Object(u.a)(o.a.mark((function e(){var t,n,c,a,r,s,u,d,f,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://www.googleapis.com/drive/v3/files/".concat(h,"/permissions"),"includeItemsFromAllDrives=true&corpora=drive&supportsAllDrives=true",n="".concat(t,"?").concat("includeItemsFromAllDrives=true&corpora=drive&supportsAllDrives=true","&fields=*"),e.next=5,w();case 5:return c=e.sent,a=c.access_token,e.next=9,fetch(n,{method:"GET",headers:{Authorization:"Bearer "+a}});case 9:return r=e.sent,e.next=12,r.json();case 12:s=e.sent,u=[],d=Object(l.a)(s.permissions);try{for(d.s();!(f=d.n()).done;)"organizer"===(j=f.value).role&&u.push(j.emailAddress)}catch(o){d.e(o)}finally{d.f()}i(u);case 17:case"end":return e.stop()}}),e)})))()}),[]),Object(N.jsx)(f.a,{children:Object(N.jsxs)("div",{className:"App",children:[Object(N.jsx)(L,{isAuth:v,handleLogIn:function(e,t){a.includes(t)?(b(e),g(!0)):window.alert("Google account is not an approved editor! Log in under proper administrator account")},handleLogOut:function(){g(!1),b(""),window.location.reload()}}),Object(N.jsxs)(j.c,{children:[Object(N.jsx)(j.a,{exact:!0,path:"/",children:Object(N.jsx)(K,{isAuth:v,authToken:p})}),Object(N.jsx)(j.a,{path:"/upload",children:Object(N.jsx)(V,{isNewFile:!0,isAuth:v,authToken:p})}),Object(N.jsx)(j.a,{exact:!0,path:"/:fileID",children:Object(N.jsx)(J,{isAuth:v,authToken:p})}),Object(N.jsx)(j.a,{exact:!0,path:"/:fileID/edit",children:Object(N.jsx)(V,{isAuth:v,authToken:p})})]})]})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,257)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};r.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(W,{})}),document.getElementById("root")),Y()}},[[256,1,2]]]);
//# sourceMappingURL=main.7a2d96f2.chunk.js.map